<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PteroClone Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0b0f13; color: #e2e8f0; }
        .active-tab { border-bottom: 3px solid #3b82f6; color: #3b82f6; background-color: #1a202c; }
        .terminal-bg { background-color: #000000; font-family: 'Courier New', Courier, monospace; }
        .tab-content { display: none; }
        .tab-content.active { display: flex; }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <header class="bg-[#1a202c] px-4 py-3 border-b border-gray-800 flex justify-between items-center">
        <span class="font-bold text-blue-500 uppercase tracking-widest text-sm">PteroClone</span>
        <select id="node-version" class="bg-gray-900 text-xs border border-gray-700 rounded px-2 py-1">
            <option>Node 20</option>
            <option>Node 18</option>
        </select>
    </header>

    <nav class="flex bg-[#111827] border-b border-gray-800">
        <button onclick="switchTab('console')" id="btn-console" class="flex-1 py-3 text-sm font-bold active-tab">
            CONSOLE
        </button>
        <button onclick="switchTab('files')" id="btn-files" class="flex-1 py-3 text-sm font-bold text-gray-500">
            FILES
        </button>
    </nav>

    <main class="flex-1 overflow-hidden relative">
        
        <div id="tab-console" class="tab-content active flex-col h-full p-2">
            <div class="flex gap-2 mb-2">
                <button onclick="power('start')" class="flex-1 bg-green-600 py-3 rounded font-bold text-xs">START</button>
                <button onclick="power('stop')" class="flex-1 bg-red-600 py-3 rounded font-bold text-xs">STOP</button>
            </div>
            <div class="flex-1 terminal-bg rounded border border-gray-700 overflow-y-auto p-3 text-[11px] leading-relaxed" id="out">
                <div class="text-gray-500">System offline. Press START to boot Node 20.</div>
            </div>
            <div class="mt-2 flex bg-gray-900 border border-gray-700 p-2 rounded">
                <span class="text-blue-500 mr-2 font-mono">‚ùØ</span>
                <input type="text" id="in" class="bg-transparent flex-1 outline-none text-xs font-mono" placeholder="Command...">
            </div>
        </div>

        <div id="tab-files" class="tab-content flex-col h-full p-2">
            <div class="bg-[#1a202c] border border-gray-700 rounded mb-2">
                <div class="p-2 border-b border-gray-700 text-[10px] font-bold text-gray-400 flex justify-between">
                    FILESYSTEM
                    <button onclick="addFile()" class="text-blue-400">+ NEW</button>
                </div>
                <div id="file-list" class="p-1 max-h-32 overflow-y-auto"></div>
            </div>
            <div class="flex-1 bg-[#1a202c] border border-gray-700 rounded flex flex-col">
                <div id="ed-name" class="p-2 text-[10px] border-b border-gray-700 text-yellow-500 italic">No file selected</div>
                <textarea id="editor" class="flex-1 bg-black text-gray-300 p-3 font-mono text-xs outline-none" spellcheck="false"></textarea>
                <button onclick="save()" class="bg-blue-600 p-2 text-xs font-bold">SAVE FILE</button>
            </div>
        </div>

    </main>

    <script>
        let files = {'index.js': 'console.log("Node 20 running...");\nconsole.log("Hello World!");', 'package.json': '{}'};
        let cur = null;
        let running = false;

        function switchTab(t) {
            document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
            document.getElementById('tab-'+t).classList.add('active');
            document.getElementById('btn-console').className = 'flex-1 py-3 text-sm font-bold ' + (t=='console'?'active-tab':'text-gray-500');
            document.getElementById('btn-files').className = 'flex-1 py-3 text-sm font-bold ' + (t=='files'?'active-tab':'text-gray-500');
            if(t=='files') listFiles();
        }

        function listFiles() {
            const l = document.getElementById('file-list');
            l.innerHTML = '';
            for(let f in files) {
                let d = document.createElement('div');
                d.className = 'p-2 text-xs border-b border-gray-800 last:border-0';
                d.innerText = 'üìÑ ' + f;
                d.onclick = () => {
                    cur = f;
                    document.getElementById('ed-name').innerText = 'Editing: ' + f;
                    document.getElementById('editor').value = files[f];
                };
                l.appendChild(d);
            }
        }

        function save() {
            if(cur) {
                files[cur] = document.getElementById('editor').value;
                alert('Saved!');
            }
        }

        function power(s) {
            const out = document.getElementById('out');
            if(s == 'start') {
                running = true;
                out.innerHTML += `<div class="text-green-500 mt-2">Container started! Running npm start...</div>`;
                try {
                    const code = files['index.js'];
                    const logs = [];
                    const fakeLog = (...args) => out.innerHTML += `<div>${args.join(' ')}</div>`;
                    new Function('console', code)({log: fakeLog});
                } catch(e) { out.innerHTML += `<div class="text-red-500">${e}</div>`; }
            } else {
                running = false;
                out.innerHTML += `<div class="text-red-500 mt-2">Container stopped.</div>`;
            }
            out.scrollTop = out.scrollHeight;
        }

        document.getElementById('in').onkeydown = (e) => {
            if(e.key == 'Enter') {
                let v = e.target.value;
                document.getElementById('out').innerHTML += `<div><span class="text-blue-500">‚ùØ</span> ${v}</div>`;
                e.target.value = '';
                if(v == 'ls') document.getElementById('out').innerHTML += `<div>${Object.keys(files).join(' ')}</div>`;
            }
        };
    </script>
</body>
</html>
