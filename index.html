<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PteroClone Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0b0f13; color: #e2e8f0; }
        .active-tab { border-bottom: 4px solid #3b82f6; color: #3b82f6; background-color: #1a202c; }
        .terminal-bg { background-color: #000000; font-family: 'Courier New', Courier, monospace; }
        .tab-content { display: none; height: calc(100vh - 110px); }
        .tab-content.active { display: flex; flex-direction: column; }
        /* Prevent zoom on input for mobile */
        input, textarea { font-size: 16px !important; }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <header class="bg-[#1a202c] px-4 py-3 border-b border-gray-800 flex justify-between items-center shrink-0">
        <div class="flex items-center gap-2">
            <div id="status-led" class="w-3 h-3 rounded-full bg-red-600 shadow-[0_0_8px_red]"></div>
            <span class="font-bold text-xs uppercase tracking-widest">Node 20 Server</span>
        </div>
        <div class="text-[10px] text-gray-500 font-mono">MEM: 128MB / 512MB</div>
    </header>

    <nav class="flex bg-[#111827] border-b border-gray-800 shrink-0">
        <button onclick="switchTab('console')" id="btn-console" class="flex-1 py-4 text-xs font-black active-tab">CONSOLE</button>
        <button onclick="switchTab('files')" id="btn-files" class="flex-1 py-4 text-xs font-black text-gray-500">FILES</button>
    </nav>

    <main class="flex-1 relative overflow-hidden">
        
        <div id="tab-console" class="tab-content active p-3">
            <div class="flex gap-2 mb-3">
                <button onclick="power('start')" class="flex-1 bg-green-600 py-3 rounded-lg font-bold text-xs shadow-lg active:scale-95 transition-transform">START</button>
                <button onclick="power('stop')" class="flex-1 bg-red-600 py-3 rounded-lg font-bold text-xs shadow-lg active:scale-95 transition-transform">STOP</button>
            </div>
            
            <div id="out" class="flex-1 terminal-bg rounded-lg border border-gray-700 overflow-y-auto p-3 text-[12px] leading-relaxed text-gray-300">
                <div class="text-gray-500 italic">Server marked as Offline. Click START to begin.</div>
            </div>

            <div class="mt-3 flex bg-gray-900 border border-gray-700 p-3 rounded-lg">
                <span class="text-blue-500 mr-2 font-mono font-bold">❯</span>
                <input type="text" id="in" class="bg-transparent flex-1 outline-none text-xs font-mono text-white" placeholder="Type a command...">
            </div>
        </div>

        <div id="tab-files" class="tab-content p-3">
            <div class="bg-[#1a202c] border border-gray-700 rounded-t-lg">
                <div class="p-2 border-b border-gray-700 text-[10px] font-bold text-gray-500 flex justify-between items-center">
                    /home/container
                    <button onclick="addFile()" class="bg-blue-600 text-white px-2 py-1 rounded">+ NEW</button>
                </div>
                <div id="file-list" class="flex overflow-x-auto p-2 gap-2">
                    </div>
            </div>

            <div class="flex-1 bg-black border-x border-gray-700 flex flex-col relative">
                <div id="ed-name" class="px-3 py-2 text-[11px] bg-gray-900 text-yellow-500 font-mono border-b border-gray-800">Select a file...</div>
                <textarea id="editor" class="flex-1 bg-transparent text-blue-100 p-4 font-mono text-sm outline-none resize-none" spellcheck="false" placeholder="// Select a file to start coding"></textarea>
            </div>

            <button onclick="save()" class="bg-blue-500 hover:bg-blue-400 py-4 w-full rounded-b-lg font-black text-sm tracking-widest shadow-[0_-4px_10px_rgba(0,0,0,0.3)] active:bg-blue-300">
                SAVE FILE
            </button>
        </div>

    </main>

    <script>
        let files = {
            'index.js': 'console.log("Initializing Node 20...");\n\nsetTimeout(() => {\n  console.log("Server is now listening on Port 3000");\n}, 1500);',
            'package.json': '{\n  "name": "ptero-mobile",\n  "version": "1.0.0",\n  "main": "index.js"\n}'
        };
        let cur = null;
        let running = false;

        function switchTab(t) {
            document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
            document.getElementById('tab-'+t).classList.add('active');
            document.getElementById('btn-console').className = 'flex-1 py-4 text-xs font-black ' + (t=='console'?'active-tab':'text-gray-500');
            document.getElementById('btn-files').className = 'flex-1 py-4 text-xs font-black ' + (t=='files'?'active-tab':'text-gray-500');
            if(t=='files') listFiles();
        }

        function listFiles() {
            const l = document.getElementById('file-list');
            l.innerHTML = '';
            for(let f in files) {
                let d = document.createElement('div');
                d.className = `whitespace-nowrap px-4 py-2 rounded-full text-xs font-bold transition-all ${cur === f ? 'bg-blue-600 text-white' : 'bg-gray-800 text-gray-400'}`;
                d.innerText = f;
                d.onclick = () => {
                    cur = f;
                    document.getElementById('ed-name').innerText = 'Editing: ' + f;
                    document.getElementById('editor').value = files[f];
                    listFiles(); // Refresh active state
                };
                l.appendChild(d);
            }
        }

        function save() {
            if(!cur) return alert('Select a file first!');
            files[cur] = document.getElementById('editor').value;
            
            // Toast notification
            const btn = document.querySelector('[onclick="save()"]');
            btn.innerText = "✓ SAVED SUCCESSFULLY";
            btn.classList.replace('bg-blue-500', 'bg-green-500');
            setTimeout(() => {
                btn.innerText = "SAVE FILE";
                btn.classList.replace('bg-green-500', 'bg-blue-500');
            }, 1500);
        }

        function power(s) {
            const out = document.getElementById('out');
            const led = document.getElementById('status-led');
            if(s == 'start') {
                if(running) return;
                running = true;
                led.className = "w-3 h-3 rounded-full bg-green-500 shadow-[0_0_8px_#22c55e]";
                out.innerHTML += `<div class="text-yellow-500 mt-2 font-bold">[SYSTEM] Booting container...</div>`;
                setTimeout(() => {
                    out.innerHTML += `<div class="text-green-400 font-mono">container@pteroclone:~# node index.js</div>`;
                    try {
                        const code = files['index.js'];
                        const fakeLog = (...args) => {
                            out.innerHTML += `<div class="font-mono text-white">${args.join(' ')}</div>`;
                            out.scrollTop = out.scrollHeight;
                        };
                        new Function('console', code)({log: fakeLog});
                    } catch(e) { out.innerHTML += `<div class="text-red-500 font-bold">${e}</div>`; }
                }, 1000);
            } else {
                running = false;
                led.className = "w-3 h-3 rounded-full bg-red-600 shadow-[0_0_8px_red]";
                out.innerHTML += `<div class="text-red-500 mt-2 font-bold">[SYSTEM] Shutdown signal received.</div>`;
            }
            out.scrollTop = out.scrollHeight;
        }

        document.getElementById('in').onkeydown = (e) => {
            if(e.key == 'Enter') {
                let v = e.target.value;
                if(!v) return;
                document.getElementById('out').innerHTML += `<div class="font-mono"><span class="text-blue-500">❯</span> ${v}</div>`;
                e.target.value = '';
                if(v == 'ls') document.getElementById('out').innerHTML += `<div class="text-blue-300">${Object.keys(files).join('  ')}</div>`;
                if(v == 'clear') document.getElementById('out').innerHTML = '';
                document.getElementById('out').scrollTop = document.getElementById('out').scrollHeight;
            }
        };

        function addFile() {
            let n = prompt("File name:");
            if(n) { files[n] = ""; listFiles(); }
        }
    </script>
</body>
</html>
